;/*FB_PKG_DELIM*/

__d("EncryptedBackupsDYIPasswordReauthDialogQuery.graphql",["EncryptedBackupsDYIPasswordReauthDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EncryptedBackupsDYIPasswordReauthDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometSingleActionWithPasswordReauthBarrierDialog_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"EncryptedBackupsDYIPasswordReauthDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_fwa_user",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[{alias:null,args:null,concreteType:"PublicKeyAndIDForEncryption",kind:"LinkedField",name:"public_key_and_id_for_encryption",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"public_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key_id",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBPasswordlessReauthInfo",kind:"LinkedField",name:"passwordless_reauth_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"passwordless_warning",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"forgot_password_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_passwordless",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("EncryptedBackupsDYIPasswordReauthDialogQuery_facebookRelayOperation"),metadata:{},name:"EncryptedBackupsDYIPasswordReauthDialogQuery",operationKind:"query",text:null}};b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometSingleActionWithPasswordReauthBarrierDialog_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometSingleActionWithPasswordReauthBarrierDialog_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_fwa_user",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometSingleActionWithPasswordReauthBarrier_user"}],storageKey:null},action:"THROW",path:"account_user"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8786513128088928"}),null);
__d("CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery.graphql",["CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_mwa_authenticated",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery",selections:a},params:{id:b("CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery_facebookRelayOperation"),metadata:{live:{polling_interval:1e3}},name:"CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometSingleActionWithPasswordReauthBarrier_user.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometSingleActionWithPasswordReauthBarrier_user",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"PublicKeyAndIDForEncryption",kind:"LinkedField",name:"public_key_and_id_for_encryption",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"public_key",storageKey:null},action:"THROW",path:"public_key_and_id_for_encryption.public_key"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"key_id",storageKey:null},action:"THROW",path:"public_key_and_id_for_encryption.key_id"}],storageKey:null},action:"THROW",path:"public_key_and_id_for_encryption"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"THROW",path:"name"},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"XFBPasswordlessReauthInfo",kind:"LinkedField",name:"passwordless_reauth_info",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"passwordless_warning",storageKey:null},action:"THROW",path:"passwordless_reauth_info.passwordless_warning"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"forgot_password_text",storageKey:null},action:"THROW",path:"passwordless_reauth_info.forgot_password_text"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"is_passwordless",storageKey:null},action:"THROW",path:"passwordless_reauth_info.is_passwordless"}],storageKey:null},action:"THROW",path:"passwordless_reauth_info"}],type:"User",abstractKey:null};e.exports=a}),null);
__d("CometPasswordlessReauthUtils",["CometLink.react","TetraText.react","XRecoverInitiateControllerRouteBuilder","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=c("XRecoverInitiateControllerRouteBuilder").buildURL({});return i.jsx(c("TetraText.react"),{color:"blueLink",type:"body3",children:i.jsx(c("CometLink.react"),{href:b,target:"_blank",children:a})})}a.displayName=a.name+" [from "+f.id+"]";g.forgotPasswordCometLink=a}),98);
__d("CometSingleActionWithPasswordReauthBarrier.react",["fbt","CometColumn.react","CometColumnItem.react","CometComponentWithKeyCommands.react","CometFormTextInput.react","CometKeys","CometPasswordReauthenticationMutation","CometPasswordlessReauthUtils","CometProfilePhoto.react","CometProgressRingIndeterminate.react","CometRelay","CometRow.react","CometRowItem.react","CometSingleActionWithPasswordReauthBarrier_user.graphql","TetraButtonGroup.react","TetraText.react","promiseDone","react","requireDeferred","useProfileCometErrorDialog_DEPRECATED"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useState,m=c("requireDeferred")("FBBrowserPasswordEncryption").__setRef("CometSingleActionWithPasswordReauthBarrier.react"),n="/images/profile/picture/silhouette/female_160.png";function a(a){var e=a.pushPage,f=a.user$key;a=babelHelpers.objectWithoutPropertiesLoose(a,["pushPage","user$key"]);var g=a.children,j=a.onCancel,o=a.onSubmit,p=a.primaryButtonLabel,q=a.title;a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometSingleActionWithPasswordReauthBarrier_user.graphql"),f);f=c("useProfileCometErrorDialog_DEPRECATED")(h._("__JHASH__zpv6lJhQDDp__JHASH__"));var r=f[0],s=d("CometRelay").useRelayEnvironment();f=l("");var t=f[0],u=f[1];f=l("");var v=f[0],w=f[1];f=l(!1);var x=f[0],y=f[1];f=l(null);var z=f[0],A=f[1];f=a.name;var B=a.profile_picture,C=a.public_key_and_id_for_encryption,D=C.key_id,E=C.public_key;C=function(a){u(a),w(""),A(null)};var F=Math.floor(Date.now()/1e3).toString(),G=function(){y(!0),m.onReady(function(a){return c("promiseDone")(a.encryptPassword(D,E,t,F),function(a){d("CometPasswordReauthenticationMutation").cometPasswordReauthenticationAction(s,a,function(a){y(!1);(a==null?void 0:(a=a.comet_password_reauthentication)==null?void 0:a.reauth_is_successful)===!0?e(function(a){a=a.setTitle;a(q);return k.jsxs("div",{className:"xx6bls6 x1pi30zi x1swvt13 x1cnzs8",children:[g,k.jsx(c("TetraButtonGroup.react"),{align:"end",direction:"backward",primary:{label:(a=p)!=null?a:h._("__JHASH__YcNU-RW2Q0q__JHASH__"),onPress:o,padding:"wide",testid:"password-reauth-primary-action"},secondary:{label:h._("__JHASH__gZXub0uZxU3__JHASH__"),onPress:j,reduceEmphasis:!0}})]})},{title:q}):(w(h._("__JHASH__aoyzodYFNxu__JHASH__")),A("ERROR"))})},function(a){y(!1),r(a)})})};a=a.passwordless_reauth_info;var H=a.forgot_password_text,I=a.is_passwordless;a=a.passwordless_warning;return k.jsxs(c("CometColumn.react"),{paddingTop:0,paddingVertical:16,children:[k.jsx(c("CometColumnItem.react"),{expanding:!1,children:k.jsxs(c("CometRow.react"),{align:"start",spacing:12,verticalAlign:"center",children:[k.jsx(c("CometRowItem.react"),{children:k.jsx(c("CometProfilePhoto.react"),{shape:"circle",size:40,source:{uri:(B=B==null?void 0:B.uri)!=null?B:n}})}),k.jsx(c("CometRowItem.react"),{children:k.jsx(c("TetraText.react"),{type:"body2",children:(B=f)!=null?B:""})})]})}),k.jsx(c("CometColumnItem.react"),{paddingHorizontal:12,paddingTop:12,children:k.jsx(c("TetraText.react"),{type:"body3",children:h._("__JHASH__R9fQ9u5ID7Q__JHASH__")})}),I?k.jsx(c("CometColumnItem.react"),{paddingHorizontal:12,paddingTop:12,children:k.jsx(c("TetraText.react"),{type:"body3",children:a})}):null,k.jsx(c("CometColumnItem.react"),{children:k.jsx(c("CometRow.react"),{children:k.jsx(c("CometRowItem.react"),{expanding:!0,children:k.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:[{command:{key:c("CometKeys").ENTER},description:h._("__JHASH__YcNU-RW2Q0q__JHASH__"),handler:G,triggerFromInputs:!0}],children:k.jsx(c("CometFormTextInput.react"),{helperText:v,label:h._("__JHASH__BUrg6XPKrWk__JHASH__"),onValueChange:C,testid:void 0,type:"password",validationState:z,value:t})})})})}),k.jsxs(c("CometRow.react"),{paddingTop:0,children:[I?k.jsx(c("CometRowItem.react"),{verticalAlign:"center",children:d("CometPasswordlessReauthUtils").forgotPasswordCometLink(H)}):null,k.jsx(c("CometRowItem.react"),{expanding:!0,children:k.jsx(c("TetraButtonGroup.react"),{align:"end",direction:"backward",primary:{addOnPrimary:x?k.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:16}):void 0,disabled:x,label:h._("__JHASH__YcNU-RW2Q0q__JHASH__"),onPress:function(){return G()},testid:"password-reauth-confirm"},secondary:{label:h._("__JHASH__gZXub0uZxU3__JHASH__"),onPress:j,reduceEmphasis:!0}})})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSingleActionWithPasswordReauthBarrierForWorkAccount.react",["fbt","CometColumn.react","CometColumnItem.react","CometProgressRingIndeterminate.react","CometRelay","CometRow.react","CometRowItem.react","CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery.graphql","TetraButtonGroup.react","TetraText.react","XAtWorkSAMLReauthPopupControllerRouteBuilder","XWorkAccountsSecureActionDelegateControllerRouteBuilder","goURIOnWindow","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useState;function a(a){var e,f=a.pushPage;a=babelHelpers.objectWithoutPropertiesLoose(a,["pushPage"]);var g=a.children,j=a.onCancel,m=a.onSubmit,n=a.primaryButtonLabel,o=a.title;a=i!==void 0?i:i=b("CometSingleActionWithPasswordReauthBarrierForWorkAccountQuery.graphql");e=(e=(e=c("XAtWorkSAMLReauthPopupControllerRouteBuilder").buildUri({}).getQualifiedUri())==null?void 0:(e=e.setSubDomain("work"))==null?void 0:e.toString())!=null?e:"";var p=(e=(e=c("XWorkAccountsSecureActionDelegateControllerRouteBuilder").buildUri({next:e,source:"business_manager"}).getQualifiedUri())==null?void 0:(e=e.setSubDomain("work"))==null?void 0:e.toString())!=null?e:"";e=d("CometRelay").useLazyLoadQuery(a,{});a=l(!1);var q=a[0],r=a[1],s=function(){c("goURIOnWindow")(window.open("","_blank","width=640, height=480"),p),r(!0)};((a=e.viewer)==null?void 0:a.is_mwa_authenticated)===!0&&f(function(a){a=a.setTitle;a(o);return k.jsxs("div",{className:"xx6bls6 x1pi30zi x1swvt13 x1cnzs8",children:[g,k.jsx(c("TetraButtonGroup.react"),{align:"end",direction:"backward",primary:{label:(a=n)!=null?a:h._("__JHASH__YcNU-RW2Q0q__JHASH__"),onPress:m,padding:"wide",testid:"password-reauth-primary-action"},secondary:{label:h._("__JHASH__gZXub0uZxU3__JHASH__"),onPress:j,reduceEmphasis:!0}})]})},{title:o});return k.jsxs(c("CometColumn.react"),{paddingTop:0,paddingVertical:16,children:[k.jsx(c("CometColumnItem.react"),{paddingHorizontal:12,paddingTop:12,children:k.jsx(c("TetraText.react"),{type:"body3",children:h._("__JHASH__I-rBaSJMx_5__JHASH__")})}),k.jsx(c("CometRow.react"),{paddingTop:0,children:k.jsx(c("CometRowItem.react"),{expanding:!0,children:k.jsx(c("TetraButtonGroup.react"),{align:"end",direction:"backward",primary:{addOnPrimary:q?k.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:16}):void 0,disabled:q,label:h._("__JHASH__PYBCjLQZ62R__JHASH__"),onPress:function(){return s()}}})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometSingleActionWithPasswordReauthBarrierDialog.react",["fbt","CometMultiStepDialogLegacy.react","CometRelay","CometSingleActionWithPasswordReauthBarrier.react","CometSingleActionWithPasswordReauthBarrierDialog_viewer.graphql","CometSingleActionWithPasswordReauthBarrierForWorkAccount.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var e=a.viewer$key;a=babelHelpers.objectWithoutPropertiesLoose(a,["viewer$key"]);var f=a.onCancel,g=babelHelpers.objectWithoutPropertiesLoose(a,["onCancel"]);a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometSingleActionWithPasswordReauthBarrierDialog_viewer.graphql"),e);if(a==null)return c("recoverableViolation")("viewer cannot be null","secured_action");var j=a.account_user,l=a.is_fwa_user===!0;return k.jsx(c("CometMultiStepDialogLegacy.react"),{onClose:f,testid:void 0,title:l?h._("__JHASH__xxQRpas-JzN__JHASH__"):h._("__JHASH__5XRCqlQ9yLH__JHASH__"),withCloseButton:!0,children:function(a){return l?k.jsx(c("CometSingleActionWithPasswordReauthBarrierForWorkAccount.react"),babelHelpers["extends"]({},g,{onCancel:f,pushPage:a})):k.jsx(c("CometSingleActionWithPasswordReauthBarrier.react"),babelHelpers["extends"]({},g,{onCancel:f,pushPage:a,user$key:j}))}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("EncryptedBackupsDYIPasswordReauthDialog.react",["fbt","CometRelay","CometSingleActionWithPasswordReauthBarrierDialog.react","EncryptedBackupsDYIPasswordReauthDialogQuery.graphql","MWXColumn.react","MWXColumnItem.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var e=a.props,f=e.onClose,g=e.onConfirm;e=a.queries.queryReference;a=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("EncryptedBackupsDYIPasswordReauthDialogQuery.graphql"),e);e=a.viewer;return k.jsx(c("CometSingleActionWithPasswordReauthBarrierDialog.react"),{onCancel:f,onSubmit:function(){f(),g()},primaryButtonLabel:h._("__JHASH__JW1_aI1luDr__JHASH__"),title:h._("__JHASH__VOu4WSGDu0V__JHASH__"),viewer$key:e,children:k.jsx(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:12,spacing:12,children:k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{type:"body3",children:h._("__JHASH__D05nAsqe6Pt__JHASH__")})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("useCometAlertDialog",["CometDialogLoadingState.react","react","requireDeferred","useCometDeferredDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k=c("requireDeferred")("CometAlertDialogImpl.react").__setRef("useCometAlertDialog");function l(){return i.jsx(c("CometDialogLoadingState.react"),{})}l.displayName=l.name+" [from "+f.id+"]";function a(){var a=c("useCometDeferredDialog")(k,l);return j(function(b,c){c===void 0&&(c=function(){}),a(b,c)},[a])}g["default"]=a}),98);
__d("IGDSErrorOutlineIcon",["IGDSErrorPanoOutlineIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("IGDSErrorPanoOutlineIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("useIGDMediaMangerUploadFailedToast",["fbt","IGDSErrorOutlineIcon","react","useIGDSToaster"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback;function a(){var a=c("useIGDSToaster")();return k(function(b,d){a.add({icon:j.jsx(c("IGDSErrorOutlineIcon"),{alt:h._("__JHASH__ScQg6mAoJXK__JHASH__")}),message:b,messageSecondary:d,target:"bottom-left"},{duration:2750})},[a])}g["default"]=a}),98);
__d("MWV2MessageRowActionsContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));c=h;e=c.createContext;var i=c.createElement,j=c.useContext;d={current:function(){}};c={current:function(){}};var k={current:function(){}},l={current:function(){}};d={forwardMessage:d,openReactionsMenu:c,removeMessage:k,replyToMessage:l};var m=e(d);function a(){return j(m)}function b(a){var b=a.children;a=a.value;return i(m.Provider,{children:b,value:a})}b.displayName=b.name+" [from "+f.id+"]";g.useMessageRowActionsContext=a;g.MWV2MessageRowActionsContextProvider=b}),98);
__d("MWChatFilePreProcessingErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__Tgh_5naYWqz__JHASH__")};g.invalidFileFormat=a}),98);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._("__JHASH__Tr8urrZ1rc1__JHASH__",[h._param("size",a)]),title:h._("__JHASH__GVmFuh2jycz__JHASH__")}};g.maxFileSizeExceeded=a}),98);
__d("MWSharedMediaManagerUtils",["I64","LSIntEnum","LSMailboxType","MWPComposerMediaUploadUtil","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","justknobx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return new(k||(k=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function m(a){return new(k||(k=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function n(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(i||(i=d("I64"))).of_float(c),previewWidth:i.of_float(b.previewWidth)}:{previewHeight:(i||(i=d("I64"))).of_float(b.previewHeight),previewWidth:i.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield (k||(k=b("Promise"))).all(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];var e=URL.createObjectURL(b),g;c("justknobx")._("1704")===!0&&b.type.includes("video/")?g=(yield m(e)):g=(yield l(e));return[{attachmentType:d("MWPComposerMediaUploadUtil").getAttachmentType(b),durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(i||(i=d("I64"))).of_int32(b.size),hasError:!1,isSent:!1,mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:a,offlineThreadingId:void 0,previewUrl:e,progress:0,threadKey:f},g]});return function(b){return a.apply(this,arguments)}}())));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield a.table("sync_groups").get((i||(i=d("I64"))).of_float(1))),e;if((c==null?void 0:c.syncParams)!=null){c=JSON.parse(c.syncParams);var f=c.preview_height;c=c.preview_width;e={previewHeight:f,previewWidth:c}}yield (k||(k=b("Promise"))).all(g.map(function(b){var c=b[0];b=b[1];return a.table("media_staging").add(babelHelpers["extends"]({},c,n(b,e)))}))});return function(b){return a.apply(this,arguments)}}(),"readwrite")});return o.apply(this,arguments)}function e(a,b){return a.runInTransaction(function(a){return a.table("media_staging")["delete"](b)},"readwrite")}function p(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":167")}g.insertMediaStaging=a;g.deleteMediaStaging=e;g.useMediaStaging=p}),98);
__d("useMWXAlertDialog",["emptyFunction","react","useCometAlertDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=c("useCometAlertDialog")();return i(function(d){var e=a.onClose==null?c("emptyFunction"):a.onClose;b(babelHelpers["extends"]({body:d.body},d),e)},[b,a.onClose])}g["default"]=a}),98);
__d("MWMediaManager",["FBLogger","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorDialog.react","MWChatFileUploadErrorDialog.react","MWSharedMediaManagerUtils","Promise","cr:6986","emptyFunction","gkx","promiseDone","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),k=function(){if(b("cr:6986")==null){c("FBLogger")("messenger_web_product").warn("Unsupported thread type for media upload");return(i||(i=b("Promise"))).resolve(null)}return b("cr:6986").load()},l=c("gkx")("1147754")?75:25;function m(a,c){if(c)return k().then(function(c){return(c=c==null?void 0:c.preprocess(a))!=null?c:(i||(i=b("Promise"))).resolve([])});else return j.load().then(function(b){return b.preprocess(a)})}function n(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=c(e,b);if(e.size>f*1024*1024)return f}return null}function a(a){var e=a.chatSupportUserId,f=a.chatSupportUserNonce,g=a.getMaxAttachmentSizeInMB;g=g===void 0?function(){return l}:g;var o=a.isChatSupportUser,p=a.isLargeAttachmentSendingEnabled,q=a.onUploadFailure,r=a.onUploadStart,s=a.onUploadSuccess,t=a.showUploadFailureToast,u=a.thread,v=p!=null&&p?function(){return 75}:g,w=(h||(h=c("useReStore")))(),x=c("useMWXAlertDialog")({onClose:c("emptyFunction")}),y=d("LSMessagingThreadTypeUtil").isSecure(u.threadType),z=d("MWSharedMediaManagerUtils").useMediaStaging(u);a=function(a){var g=n(a,y,v);if(g!=null){x(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(g),c("emptyFunction"));return}c("promiseDone")(m(a,y)["catch"](function(){x(d("MWChatFilePreProcessingErrorDialog.react").invalidFileFormat,c("emptyFunction"));return(i||(i=b("Promise"))).resolve([])}).then(function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(w,a,u.threadKey));var b=u.threadKey;return y?k().then(function(c){return c==null?void 0:c.upload(w,b,a)}):j.load().then(function(c){return c.upload(w,b,a,t,r,s,q,o,e,f)})}))};p=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(w,a).then(function(){if(y&&b("cr:6986")!=null)return b("cr:6986").load().then(function(b){b.MAWMediaManagerAttachments["delete"](a)})}))};g=function(){var a=z.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(w,a)["catch"](function(a){c("FBLogger")("MWMediaManager").catching(a).mustfix("Error deletting media staging.")})});y&&b("cr:6986")!=null&&c("promiseDone")(b("cr:6986").load().then(function(b){b.clearAttachments(a)}))};return{handleFileRemove:p,handleFileSelect:a,mediaStaging:z,resetAttachments:g}}g.useMediaManager=a}),98);
__d("MWPReplyContext.react",["I64","emptyFunction","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;e=b.createContext;var k=b.useCallback,l=b.useMemo,m=b.useState,n=c("requireDeferred")("MWPReplyLogging").__setRef("MWPReplyContext.react"),o=e({clearReply:c("emptyFunction"),reply:void 0,setReply:c("emptyFunction")});function p(a){try{return JSON.parse(a)}catch(a){return}}function a(a){var b=a.children,c=a.clearThreadReply,e=a.getRepliesState,f=a.persistRepliesState,g=a.senderId;a=a.threadKey;e=e!=null&&a!=null?p(e((i||(i=d("I64"))).to_string(a))):void 0;a=m(e);var h=a[0],q=a[1],r=k(function(a,b){n.onReady(function(c){c.logClearReply(b,a,h!=null)});q();if(c!=null)return c((i||(i=d("I64"))).to_string(a))},[c,h]),s=k(function(a,b){n.onReady(function(c){c.logSetReply(h,a,b)});q(a);if(f!=null)return f({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,senderId:g,sendStatusV2:a.sendStatusV2,threadKey:(i||(i=d("I64"))).to_string(b),timestampMs:a.timestampMs})},[f,h,g]);e=l(function(){return{clearReply:r,reply:h,setReply:s}},[h,s,r]);return j.jsx(o.Provider,{value:e,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWPReplyContext=o;g.MWPReplyContextProvider=a}),98);
__d("IGDSFace2OutlineIcon",["IGDSFace2PanoOutlineIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("IGDSFace2PanoOutlineIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("MWXColumn.react",["cr:804","cr:842","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,c){if(b("cr:804")!=null)return i.jsx(b("cr:804"),babelHelpers["extends"]({},a,{ref:c}));return b("cr:842")!=null?i.jsx(b("cr:842"),babelHelpers["extends"]({},a,{ref:c})):null}a.displayName=a.name+" [from "+f.id+"]";c=i.forwardRef(a);e=c;g["default"]=e}),98);
__d("MWXColumnItem.react",["cr:1350","cr:2004","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,c){if(b("cr:1350")!=null)return i.jsx(b("cr:1350"),babelHelpers["extends"]({},a,{ref:c}));return b("cr:2004")!=null?i.jsx(b("cr:2004"),babelHelpers["extends"]({},a,{ref:c})):null}a.displayName=a.name+" [from "+f.id+"]";c=i.forwardRef(a);g["default"]=c}),98);
__d("MWXImage.react",["cr:1261","cr:2838","cr:6682","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=a.objectFit,d=a.src;a=babelHelpers.objectWithoutPropertiesLoose(a,["objectFit","src"]);if(b("cr:6682")!=null)return i.jsx(b("cr:6682"),babelHelpers["extends"]({objectFit:c,src:d},a));if(typeof d==="string")return b("cr:2838")!=null?i.jsx(b("cr:2838"),babelHelpers["extends"]({src:d},a)):null;else return b("cr:1261")!=null?i.jsx(b("cr:1261"),babelHelpers["extends"]({src:d},a)):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("useProfileCometErrorDialog_DEPRECATED",["SilenceableErrorMessageUtils","react","useCometAlertDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useRef;function a(a){var b=i(null),e=c("useCometAlertDialog")();function f(b){var c=d("SilenceableErrorMessageUtils").getMetadataFromError(b);if(d("SilenceableErrorMessageUtils").shouldHideErrorMessage(c))return;c=b;b=c.code!=null&&c.description!=null&&c.summary!=null;b||e({body:null,title:a})}return[f,b]}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("XRecoverInitiateControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/recover/initiate/",Object.freeze({sbc:!1,sr:!1,multiple_results:!1,cl:!1,wsr:!1,ipw:!1,redirect_to_full_page_on_captcha:!1,hacked:!1,nothacked:!1,scp:!1,from_login_screen:!1,from_two_step_login:!1,is_from_lara_screen:!1}),void 0);b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("XWorkAccountsSecureActionDelegateControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/secured_action/mwa_challenge/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("XAtWorkSAMLReauthPopupControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/work/saml/reauth_popup/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);